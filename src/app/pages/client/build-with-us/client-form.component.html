<div class="client-form-page">
  <!-- Floating Navbar -->
  <section id="hero" class="hero-section">
    <img [src]="heroBuildingImage" alt="Pandigi Building" class="building-image" [@slideInRight]="buildingVisible ? 'visible' : 'hidden'">

    <nav class="navbar-floating" [@navbarSlide]="navbarVisible ? 'visible' : 'hidden'">
      <div class="navbar-container">
        <div class="navbar-logo">
          <img src="/content/logo-no-bg.webp" alt="Navbar Logo" (click)="navigateToOtherPage('/')" loading="eager">
        </div>
        <ul class="navbar-menu">
          <li><a (click)="navigateToOtherPage('/what-we-do')">WHAT WE DO</a></li>
          <li><a (click)="navigateToOtherPage('/who-we-are')">WHO WE ARE</a></li>
          <li><a (click)="navigateToOtherPage('/our-work')">OUR WORK</a></li>
          <li><a (click)="scrollToSection('hero')" class="active">BUILD WITH US</a></li>
        </ul>
      </div>
    </nav>

    <div class="hero-content" role="banner" aria-labelledby="hero-title">
      <h1 id="hero-title" class="hero-title" [@slideInLeft]="buildingVisible ? 'visible' : 'hidden'">{{ heroTitle }}</h1>
      <p class="hero-subtitle" [@slideInLeft]="buildingVisible ? 'visible' : 'hidden'">{{ heroSubtitle }}</p>
      <img [src]="heroVector" alt="Pandigi Logo" class="hero-logo" loading="lazy">
    </div>
  </section>

  <!-- Main Content -->
  <div class="form-container">
    <h1 class="form-title">{{ formSectionTitle }}</h1>

    <div class="form-content">
      <div class="form-left">
        <h2 class="form-subtitle">{{ formSectionSubtitle }}</h2>
        <p class="form-description">
          {{ formSectionDescription }}
        </p>
      </div>

      <div class="form-right">
        <form (ngSubmit)="onSubmit()" class="contact-form">
          <!-- Name Fields -->
          <div class="form-row">
            <div class="form-group">
              <input type="text" [(ngModel)]="formData.firstName" name="firstName" placeholder="First Name"
                [class.error]="formErrors.firstName" (input)="formErrors.firstName = false" required>
            </div>
            <div class="form-group">
              <input type="text" [(ngModel)]="formData.lastName" name="lastName" placeholder="Last Name"
                [class.error]="formErrors.lastName" (input)="formErrors.lastName = false" required>
            </div>
          </div>

          <!-- Email -->
          <div class="form-group">
            <input type="email" [(ngModel)]="formData.email" name="email" placeholder="Email"
              [class.error]="formErrors.email" (input)="formErrors.email = false" required>
          </div>

          <!-- Phone Number -->
          <div class="form-group">
            <input type="tel" [(ngModel)]="formData.phoneNumber" name="phoneNumber" placeholder="Phone Number"
              [class.error]="formErrors.phoneNumber" (input)="formErrors.phoneNumber = false" required>
          </div>

          <!-- Perusahaan -->
          <div class="form-group">
            <input type="text" id="perusahaan" name="perusahaan" [(ngModel)]="formData.perusahaan" class="form-control"
              placeholder="Your company name">
          </div>

          <div class="form-row">
            <!-- Topic Custom Dropdown  -->
            <div class="custom-dropdown" (click)="$event.stopPropagation()">
              <div class="custom-dropdown">
                <div
                  class="custom-dropdown-trigger"
                  [class.active]="dropdownStates['layanan']"
                  (click)="toggleDropdown('layanan', $event)"
                >
                  <span class="custom-dropdown-label">
                    {{ getSelectedLayananLabel() }}
                  </span>

                  <span
                    class="custom-dropdown-arrow"
                    [class.rotated]="dropdownStates['layanan']"
                  >
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                      <path d="M6 9L1 4h10z" fill="currentColor" />
                    </svg>
                  </span>
                </div>

                <div
                  class="custom-dropdown-menu"
                  [class.show]="dropdownStates['layanan']"
                >
                  <div
                    class="custom-dropdown-item"
                    *ngFor="let layanan of layananOptions"
                    (click)="selectDropdownItem('layanan', layanan)"
                  >
                    {{ layanan.name }}
                  </div>
                </div>
              </div>
            </div>

            <!-- Anggaran Custom Dropdown -->
            <div class="form-group">
              <div class="custom-dropdown" (click)="$event.stopPropagation()">
                <div
                  class="custom-dropdown-trigger"
                  [class.active]="dropdownStates['anggaran']"
                  (click)="toggleDropdown('anggaran', $event)"
                >
                  <span class="custom-dropdown-label">
                    {{ formData.anggaran || 'Select budget range' }}
                  </span>

                  <span class="custom-dropdown-arrow"
                        [class.rotated]="dropdownStates['anggaran']">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                      <path d="M6 9L1 4h10z" fill="currentColor" />
                    </svg>
                  </span>
                </div>

                <div class="custom-dropdown-menu"
                     [class.show]="dropdownStates['anggaran']">
                  <div
                    class="custom-dropdown-item"
                    *ngFor="let option of anggaranOptions"
                    (click)="selectDropdownItem('anggaran', option)"
                  >
                    {{ option }}
                  </div>
                </div>
              </div>
            </div>

            <!-- Waktu Implementasi Custom Dropdown -->
            <div class="form-group">
              <div class="custom-dropdown" (click)="$event.stopPropagation()">
                <div
                  class="custom-dropdown-trigger"
                  [class.active]="dropdownStates['waktuImplementasi']"
                  (click)="toggleDropdown('waktuImplementasi', $event)"
                >
                  <span class="custom-dropdown-label">
                    {{ formData.waktuImplementasi || 'Select timeline' }}
                  </span>

                  <span class="custom-dropdown-arrow"
                        [class.rotated]="dropdownStates['waktuImplementasi']">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
                      <path d="M6 9L1 4h10z" fill="currentColor"/>
                    </svg>
                  </span>
                </div>
                <div class="custom-dropdown-menu"
                    [class.show]="dropdownStates['waktuImplementasi']">
                  <div
                    class="custom-dropdown-item"
                    *ngFor="let option of waktuOptions"
                    (click)="selectDropdownItem('waktuImplementasi', option)"
                  >
                    {{ option }}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Message -->
          <div class="form-group">
            <textarea id="message" name="message" [(ngModel)]="formData.message" [class.error]="formErrors.message"
              class="form-control" rows="6" placeholder="Tell us about your project..." required></textarea>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="submit-btn" [disabled]="submitting">
            <span *ngIf="!submitting">SUBMIT</span>
            <span *ngIf="submitting">
              <svg class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="10" stroke-width="3" stroke-dasharray="60" stroke-dashoffset="40" />
              </svg>
              SENDING...
            </span>
          </button>
        </form>

        <!-- Success Message -->
        <div class="success-message" *ngIf="submitted" [@fadeIn]>
          <div class="success-icon">✓</div>
          <h3>Terima Kasih!</h3>
          <p class="success-main">Form Anda telah diterima dengan sukses</p>
        </div>

        <!-- Error Message -->
        <div class="error-message" *ngIf="showError" [@fadeIn] (click)="showError = false">
          <div class="error-content" (click)="$event.stopPropagation()">
            <div class="error-icon">✕</div>
            <h3>Oops!</h3>
            <p>{{ errorMessage }}</p>
            <button class="btn-understand" (click)="showError = false">
              Mengerti
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer Section -->
<footer class="footer-section">
  <div class="footer-container">
    <div class="footer-info">
      <p class="footer-line">{{ footerAddressLine1 }}</p>
      <p class="footer-line">{{ footerAddressLine2 }}</p>
      <p class="footer-line">{{ footerAddressLine3 }}</p>
    </div>
    <div class="footer-bottom">
      <div class="footer-logo">
        <img [src]="footerLogo" alt="Pandigi Logo" loading="lazy">
      </div>
      <div class="footer-copyright">
        <p>{{ footerCopyright }}</p>
      </div>
    </div>
  </div>
</footer>