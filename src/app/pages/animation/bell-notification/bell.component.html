<div class="notification-wrapper">
  <button class="notification-icon" (click)="togglePanel()">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
      <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
    </svg>
    <span class="num-count" *ngIf="unreadCount > 0">{{ unreadCount }}</span>
  </button>

  <div class="notification-container" *ngIf="showPanel">
    <div class="notification-header">
      <h3>NOTIFICATIONS</h3>
      <button
        class="settings-btn"
        (click)="markAllAsRead()"
        *ngIf="unreadCount > 0"
      >
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
          <polyline points="20 6 9 17 4 12"/>
        </svg>
      </button>
    </div>

    <div class="notification-list">
      <div
        *ngFor="let notif of notifications"
        class="notification"
        [class.new]="!notif.isRead"
        (click)="onNotificationClick(notif)"
      >
        <div class="notification-content">
          <span class="notification-emoji">
            {{ getNotificationIcon(notif.type) }}
          </span>

          <div class="notification-text">
            <strong>{{ notif.title }}</strong>
            <p>{{ notif.message }}</p>
            <small>{{ getRelativeTime(notif.createdAt) }}</small>
          </div>

          <button
            class="delete-btn"
            (click)="deleteNotification($event, notif)"
          >
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
      </div>

      <div *ngIf="notifications.length === 0" class="empty-state">
        Tidak ada notifikasi
      </div>
    </div>
  </div>
</div>
